@model Client.Models.PurchaseOrder.PurchaseOrderVM
<!--V2-331-->
<div class="m-subheader fixedDiv1">
    <div class="new-m-subheader">
        <div class="filterDescription">
            <a href="javascript:void(0)" id="linkToSearch"><span id="spnlinkToSearch"></span></a>
            - @Model.PurchaseOrderModel.ClientLookupId
        </div>
        <div style="clear:both;"></div>
    </div>
</div>
<div class="pushDiv1"></div>
<!--V2-331-->

<div class="row">
    <div class="col-xl-3">
        <div class="m-portlet">
            <div class="sideMenuArea">
                <ul class="vtabs" id="detmaintab">
                    <li class="active" id="PurchasingOrderSidebar" onclick="openCity(event, 'PurchasingOverviewlineitem')"><a href="#PurchasingOverview">@Model.Loc.Where(a => a.ResourceId == "spnPoOverview").FirstOrDefault().Value.ToString()</a></li>
                    <li id="tabReceiptHistorySidebar" onclick="openCity(event, 'POReceiptHistory')"><a href="#POReceiptHistory">Receipt History</a></li>
                </ul>
            </div>
            <div class="selectTabs" id="selectTabs">
                <select class="form-control" id="colorselector">
                    <option value="PurchasingOverview">@Model.Loc.Where(a => a.ResourceId == "spnPoPurchasingOverview").FirstOrDefault().Value.ToString()</option>
                    <option value="POReceiptHistory">@Model.Loc.Where(a => a.ResourceId == "spnPOReceiptHistory").FirstOrDefault().Value.ToString()</option>
                </select>
            </div>
        </div>
    </div>
    <div class="col-xl-9">
        <div class="row">
            <div class="col-xl-12" id="btnnblock">
                <div class="m-portlet" id="m_portlet" style="padding:15px;">
                    <div class="bottomBlock">
                        <div class="tabsArea nobg" id="PurchasingOverview" style="display:block;">
                            <div class="tab">
                                <button class="tablinks active" onclick="openCity(event, 'DetailsTab')" id="btnDetails">Details</button>
                                <button class="tablinks" onclick="openCity(event, 'VendorsTab')" id="btnVendors">Vendor</button>
                            </div>
                            <div class="selectTab">
                                <select class="form-control search" id="tabselector">
                                    <option value="Identification">Details</option>
                                    <option value="Warranty">Vendor</option>
                                </select>
                            </div>
                            <div id="DetailsTab" class="tabcontent" style="display:block;">
                                <ul class="listView">
                                    <li>
                                        <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPONo").FirstOrDefault().Value.ToString():</span>
                                        <span class="inputText">@Model.PurchaseOrderModel.ClientLookupId</span>
                                    </li>
                                    <li>
                                        <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPoStatus").FirstOrDefault().Value.ToString() :</span>
                                        <span class="inputText">@Model.PurchaseOrderModel.Status</span>
                                    </li>
                                    <li>
                                        <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnItems").FirstOrDefault().Value.ToString():</span>
                                        <span class="inputText">@Model.PurchaseOrderModel.CountLineItem</span>
                                    </li>
                                    <li style="height:auto;">
                                        <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPoReason").FirstOrDefault().Value.ToString() :</span>
                                        <span class="inputText description-span">@Model.PurchaseOrderModel.Reason</span>
                                        <div style="clear:both;"></div>
                                    </li>
                                    <li>
                                        <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPoCreatedBy").FirstOrDefault().Value.ToString():</span>
                                        <span class="inputText">@Model.PurchaseOrderModel.Creator_PersonnelName</span>
                                    </li>
                                </ul>
                            </div>
                            <div id="VendorsTab" class="tabcontent">
                                <ul class="listView">
                                    <li>
                                        <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnVendorID").FirstOrDefault().Value.ToString():</span>
                                        <span class="inputText">@Model.PurchaseOrderModel.VendorClientLookupId</span>
                                    </li>
                                    <li>
                                        <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPoVendorName").FirstOrDefault().Value.ToString() :</span>
                                        <span class="inputText">@Model.PurchaseOrderModel.VendorName</span>
                                    </li>
                                    <li>
                                        <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPoCarrier").FirstOrDefault().Value.ToString() :</span>
                                        <span class="inputText">@Model.PurchaseOrderModel.Carrier</span>
                                    </li>
                                    <li>
                                        <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnFOB").FirstOrDefault().Value.ToString():</span>
                                        <span class="inputText">@Model.PurchaseOrderModel.FOB</span>
                                    </li>
                                </ul>
                            </div>
                            <div style="clear:both;"></div>
                        </div>
                        <div class="tabsArea nobg" id="POReceiptHistory" style="display:none; margin-top:-15px;">
                            <ul class="listView">
                                <li>
                                    <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPONo").FirstOrDefault().Value.ToString():</span>
                                    <span class="inputText">@Model.PurchaseOrderModel.ClientLookupId</span>
                                </li>
                                <li>
                                    <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnAttention").FirstOrDefault().Value.ToString():</span>
                                    <span class="inputText">@Model.PurchaseOrderModel.Attention</span>
                                </li>
                                <li>
                                    <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnItems").FirstOrDefault().Value.ToString():</span>
                                    <span class="inputText">@Model.PurchaseOrderModel.CountLineItem</span>
                                </li>
                                <li>
                                    <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnVendorID").FirstOrDefault().Value.ToString() :</span>
                                    <span class="inputText">@Model.PurchaseOrderModel.VendorClientLookupId</span>
                                </li>
                                <li>
                                    <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPoVendorName").FirstOrDefault().Value.ToString() :</span>
                                    <span class="inputText">@Model.PurchaseOrderModel.VendorName</span>
                                </li>
                                <li>
                                    <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPoStatus").FirstOrDefault().Value.ToString() :</span>
                                    <span class="inputText">@Model.PurchaseOrderModel.Status</span>
                                </li>
                                <li>
                                    <span class="label">@Model.Loc.Where(a => a.ResourceId == "spnPoCreatedBy").FirstOrDefault().Value.ToString():</span>
                                    <span class="inputText">@Model.PurchaseOrderModel.Creator_PersonnelName</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="clear:both;"></div>

    <div class="col-xl-12" id="LineItems">
        <div class="m-portlet" id="m_portlet" style="padding:15px;">
            <div class="m-portlet__head" style="padding:0; height:2.5rem; margin-bottom:10px;">
                <div class="m-portlet__head-caption">
                    <div class="m-portlet__head-title">
                        <h3 class="m-portlet__head-text" style="vertical-align:top;">
                            @Model.Loc.Where(a => a.ResourceId == "spnPoLineItems").FirstOrDefault().Value.ToString()
                        </h3>
                    </div>
                </div>
                <div class="pull-right" id="AdvanceSearchDesktop">
                    <button type="button" class="btn btn-white navbar-btn" id="lineitemsidebarCollapse" title="Advance Search"><i class="fa fa-filter" style="font-size: 1.3rem;"></i></button>
                    <ul class="filter_apply globalFilterAdjusted">
                        <li class="textFilter"><span class="lifilteritemcount">0</span> @Model.Loc.Where(a => a.ResourceId == "globalFiltersAppiled").FirstOrDefault().Value.ToString()</li>
                        <li class="textClear" id="lineitemClearAdvSearchFilter"><a href="javascript:void(0)">@Model.Loc.Where(a => a.ResourceId == "globalClear").FirstOrDefault().Value.ToString()</a></li>
                    </ul>
                    <div style="clear:both;"></div>
                </div>
                <div style="clear:both;"></div>
            </div>
            <div class="actionBar" id="actionBar">
                <div class="pull-left" id="AdvanceSearchMobile">
                    <button type="button" class="btn btn-white navbar-btn" id="lineitemsidebarCollapse" title="Advance Search"><i class="fa fa-filter" style="font-size: 1.3rem;"></i></button>
                    <ul class="filter_apply globalFilterAdjusted">
                        <li class="textFilter"><span class="lifilteritemcount">0</span> @Model.Loc.Where(a => a.ResourceId == "globalFiltersAppiled").FirstOrDefault().Value.ToString()</li>
                        <li class="textClear" id="lineitemClearAdvSearchFilter"><a href="javascript:void(0)">@Model.Loc.Where(a => a.ResourceId == "globalClear").FirstOrDefault().Value.ToString()</a></li>
                    </ul>
                    <div style="clear:both;"></div>
                </div>
                <div style="clear:both;"></div>
                <div id="lineitemadvsearchfilteritems"></div>
                <div style="clear:both;"></div>
            </div>
            <div style="clear:both;"></div>

            <div class="table-responsive">
                <table id="tblLineItem" class="eqpDtlTbl row-border custom-sort" style="width:100%;">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="poridselectall"></th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnLine").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnPartID").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnDescription").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnManufacturerID").FirstOrDefault().Value.ToString()</th>
                            <th style="text-align:right !important">@Model.Loc.Where(a => a.ResourceId == "spnOrderQnt").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "globalUnits").FirstOrDefault().Value.ToString()</th>
                            <th style="text-align:right !important">@Model.Loc.Where(a => a.ResourceId == "spnUnitCost").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnQtyRec").FirstOrDefault().Value.ToString()</th>
                            <th style="text-align:right !important">@Model.Loc.Where(a => a.ResourceId == "spnQtyToDt").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnPoStatus").FirstOrDefault().Value.ToString()</th>
                            <th style="text-align:right !important">@Model.Loc.Where(a => a.ResourceId == "spnBackOrd").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "globalPrint").FirstOrDefault().Value.ToString()</th>
                        </tr>
                    </thead>
                </table>
            </div>
            @if (Model.PurchaseOrderModel.IsPurchasingReceive && !Model.PurchaseOrderModel.IsExternal)
            {
                <div class="bttns2 newPurBttn" style="margin-top:10px;">
                    <button type="button" class="btn btn-blue mobBttn" id="btnAcceptAll">@Model.Loc.Where(a => a.ResourceId == "spnAcceptAll").FirstOrDefault().Value.ToString()</button>
                    <button type="button" class="btn btn-blue mobBttn" id="btnAcceptSelected">@Model.Loc.Where(a => a.ResourceId == "spnAcceptSelect").FirstOrDefault().Value.ToString()</button>
                    <button type="button" class="btn btn-blue mobBttn" id="btnClearAll">@Model.Loc.Where(a => a.ResourceId == "spnClearAll").FirstOrDefault().Value.ToString()</button>
                    <button type="button" class="btn btn-blue mobBttn" id="btnClearSelected">@Model.Loc.Where(a => a.ResourceId == "spnClearSelected").FirstOrDefault().Value.ToString()</button>
                    <button type="button" class="btn btn-blue mobBttn" id="btnReceive">@Model.Loc.Where(a => a.ResourceId == "spnReceive").FirstOrDefault().Value.ToString()</button>
                </div>
            }
            <div style="clear:both"></div>
        </div>
    </div>

    <div class="col-xl-12" id="HistoryLineItems">
        <div class="m-portlet" id="m_portlet" style="padding:15px;">
            <div class="table-responsive">
                <table id="tblLineItemHistory" class="eqpDtlTbl row-border custom-sort hover haschild" style="width:100%;">
                    <thead>
                        <tr>
                            <th style="width:60px;"></th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnLine").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnPartID").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnDescription").FirstOrDefault().Value.ToString()</th>
                            <th style="text-align:right !important">@Model.Loc.Where(a => a.ResourceId == "spnOrderQnt").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "globalUnits").FirstOrDefault().Value.ToString()</th>
                            <th style="text-align:right !important">@Model.Loc.Where(a => a.ResourceId == "spnQtyToDt").FirstOrDefault().Value.ToString()</th>
                            <th>@Model.Loc.Where(a => a.ResourceId == "spnPoStatus").FirstOrDefault().Value.ToString()</th>
                            <th style="text-align:right !important">@Model.Loc.Where(a => a.ResourceId == "spnBckOrd").FirstOrDefault().Value.ToString()</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>
    <div id="printPartqrcodemodalcontainer"></div>
</div>
@Html.HiddenFor(m => m.PurchaseOrderModel.PurchaseOrderId)
@Html.HiddenFor(m => m.PurchaseOrderModel.IsExternal)
@Html.Partial("_ReversedCommentsModal")
@Html.Partial("_LineItemAdvanceSearch", Model)
@Html.HiddenFor(m => m.EPMInvoiceImportInUse) @*V2-1115*@
<script type="text/javascript">
    var lineNumberGridSecurity = '@ViewBag.LineItemSecurity';
    var lineNumberGridStatus = '@ViewBag.LineItemStatus';
</script>

<style type="text/css">
    .actionDrop.newAction {
        width: 150px;
        height: auto;
        right: 0;
    }

    .btn-action.new {
        width: 151px;
        text-align: left;
    }

    .bootstrap-select.btn-group.show > .dropdown-toggle.btn-default, .bootstrap-select.btn-group.show > .dropdown-toggle.btn-secondary {
        border-color: #ccc;
        -webkit-box-shadow: none;
        -moz-box-shadow: none;
        box-shadow: none;
        background-color: #315a98;
        color: #fff;
    }

    .dataTables_scroll {
        overflow: auto;
    }

    #tblLineItemHistory {
        margin: 0 auto;
        width: 100%;
        clear: both;
        border-collapse: collapse;
        table-layout: fixed;
        word-wrap: break-word;
    }

    #AdvanceSearchDesktop .btn-white {
        padding: 0.5rem 0.7rem;
        margin-top: 2px !important;
    }

    #AdvanceSearchMobile {
        display: none;
    }

    #AdvanceSearchDesktop {
        padding-bottom: 10px;
        display: block;
    }

    #actionBar {
        padding-top: 10px;
        padding-bottom: 0;
    }

        #actionBar .tagTo {
            margin-top: 0;
            margin-bottom: 10px;
        }

    #LineItems .m-portlet__head {
        margin-bottom: 0 !important;
    }
    /*V2-331*/
    .filterDescription {
        width: auto;
        float: left;
        font-size: 1.2rem;
        color: #000;
        font-weight: 500;
        line-height: 33px;
    }

        .filterDescription a {
            color: #36a3f7;
            text-decoration: none !important;
        }
    /*V2-331*/

    @@media only screen and (min-width: 640px) and (max-width: 767px) {
        #AdvanceSearchMobile {
            display: block;
            margin-bottom: 10px;
        }

        #AdvanceSearchDesktop {
            padding-bottom: 10px;
            display: none;
        }
    }

    @@media only screen and (min-width: 568px) and (max-width: 639px) {
        #AdvanceSearchMobile {
            display: block;
            margin-bottom: 10px;
        }

        #AdvanceSearchDesktop {
            padding-bottom: 10px;
            display: none;
        }
    }

    @@media only screen and (min-width: 480px) and (max-width: 567px) {
        #AdvanceSearchMobile {
            display: block;
            margin-bottom: 10px;
        }

        #AdvanceSearchDesktop {
            padding-bottom: 10px;
            display: none;
        }
    }

    @@media only screen and (min-width: 360px) and (max-width: 479px) {
        #AdvanceSearchMobile {
            display: block;
            margin-bottom: 10px;
        }

        #AdvanceSearchDesktop {
            padding-bottom: 10px;
            display: none;
        }

        #AdvanceSearchMobile ul.filter_apply.globalFilterAdjusted {
            margin: 0;
        }
    }

    @@media only screen and (min-width: 320px) and (max-width: 359px) {
        #AdvanceSearchMobile {
            display: block;
            margin-bottom: 10px;
        }

        #AdvanceSearchDesktop {
            padding-bottom: 10px;
            display: none;
        }

        #AdvanceSearchMobile ul.filter_apply.globalFilterAdjusted {
            margin: 0;
        }
    }
</style>

<script type="text/javascript">
    $(document).ready(function () {
        var x, i, j, selElmnt, a, b, c;
        x = document.getElementsByClassName("custom-selected");
        for (i = 0; i < x.length; i++) {
            selElmnt = x[i].getElementsByTagName("select")[0];
            a = document.createElement("DIV");
            a.setAttribute("class", "select-selected");
            a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
            x[i].appendChild(a);
            b = document.createElement("DIV");
            b.setAttribute("class", "select-items select-hide");
            for (j = 0; j < selElmnt.length; j++) {
                c = document.createElement("DIV");
                c.innerHTML = selElmnt.options[j].innerHTML;
                c.addEventListener("click", function (e) {
                    var y, i, k, s, h;
                    s = this.parentNode.parentNode.getElementsByTagName("select")[0];
                    h = this.parentNode.previousSibling;
                    for (i = 0; i < s.length; i++) {
                        if (s.options[i].innerHTML == this.innerHTML) {
                            s.selectedIndex = i;
                            h.innerHTML = this.innerHTML;
                            y = this.parentNode.getElementsByClassName("same-as-selected");
                            for (k = 0; k < y.length; k++) {
                                y[k].removeAttribute("class");
                            }
                            this.setAttribute("class", "same-as-selected");
                            break;
                        }
                    }
                    h.click();
                });
                b.appendChild(c);
            }
            x[i].appendChild(b);
            a.addEventListener("click", function (e) {
                e.stopPropagation();
                closeAllSelect(this);
                this.nextSibling.classList.toggle("select-hide");
                this.classList.toggle("select-arrow-active");
            });
        }
        function closeAllSelect(elmnt) {
            var x, y, i, arrNo = [];
            x = document.getElementsByClassName("select-items");
            y = document.getElementsByClassName("select-selected");
            for (i = 0; i < y.length; i++) {
                if (elmnt == y[i]) {
                    arrNo.push(i)
                } else {
                    y[i].classList.remove("select-arrow-active");
                }
            }
            for (i = 0; i < x.length; i++) {
                if (arrNo.indexOf(i)) {
                    x[i].classList.add("select-hide");
                }
            }
        }
        document.addEventListener("click", closeAllSelect);
    });
</script>
